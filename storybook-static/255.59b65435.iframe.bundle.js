"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[255],{"./src/components/ResponsivePicture/ResponsivePicture.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>ResponsivePicture});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const HydrationContext=react.createContext(false);var ViewportContext=__webpack_require__("./src/contexts/Viewport/ViewportContext.tsx");const applyValueToResult=param=>{let{className,result,viewport,value,propMap,varPrefix,baseClass,styles}=param,valueKey=value;void 0!==propMap&&Object.prototype.hasOwnProperty.call(propMap,value)&&(valueKey=propMap[value]);const viewportClassName=(param=>{let{viewport,className,value,baseClass,varPrefix}=param;const currentBaseClass=void 0!==baseClass?"".concat(baseClass,"-"):"",currentVarPrefix=null!=varPrefix?varPrefix:"vp";return"".concat(currentBaseClass).concat(currentVarPrefix,"-").concat(className,"-").concat(viewport,"--").concat(value)})({className,viewport,value:valueKey,varPrefix,baseClass});void 0!==styles&&result.push(viewportClassName)},SPACES=/ +/;function getScopedClasses(str,styles){return str.split(SPACES).filter((item=>item in styles)).map((cls=>styles[cls])).join(" ")}function getClassNames(param){let{isHydrated,isRendered,isLoading,isLoaded,isError,renderedClassName,loadingPreventedClassName,loadingClassName,loadedClassName,errorClassName,hydratedClassName,notHydratedClassName,styles,containerClass,pictureClass,layout,reverseOrderViewports}=param;const containerHydratedClass="".concat(containerClass,"--js"),containerNotHydratedClass="".concat(containerClass,"__picture__no-js"),containerRenderedClass="".concat(containerClass,"--rendered"),containerLoadingPreventedClass="".concat(containerClass,"--no-load"),containerActiveClass="".concat(containerClass,"--active"),containerRemovedClass="".concat(containerClass,"--removed"),containerLoadingClass="".concat(containerClass,"--loading"),containerLoadedClass="".concat(containerClass,"--loaded"),containerErrorClass="".concat(containerClass,"--error"),isRemoved=!isHydrated&&!isRendered,containerLayoutClassNames=(param=>{let{className,value,reverseOrderViewports,propMap,varPrefix,baseClass,styles}=param;const result=[];if(void 0===value)return result;if("string"==typeof value)return applyValueToResult({className,result,viewport:"default",value,propMap,varPrefix,baseClass,styles}),result;let defaultViewportProps=null,currentViewportProps=null;for(const viewport of reverseOrderViewports){if(Object.prototype.hasOwnProperty.call(value,viewport)){const viewportProps=value[viewport];currentViewportProps=viewportProps,null===defaultViewportProps&&(defaultViewportProps=viewportProps)}null!==currentViewportProps&&applyValueToResult({className,result,viewport,value:currentViewportProps,propMap,varPrefix,baseClass,styles})}return null!==defaultViewportProps&&applyValueToResult({className,result,viewport:"default",value:defaultViewportProps,propMap,varPrefix,baseClass,styles}),result})({styles,baseClass:containerClass,className:"layout",value:layout,reverseOrderViewports}),containerClasses=classnames_default()(containerClass,containerLayoutClassNames,isHydrated?[containerHydratedClass,hydratedClassName]:[containerNotHydratedClass,notHydratedClassName],isRendered?[containerRenderedClass,renderedClassName]:[containerLoadingPreventedClass,loadingPreventedClassName],isRemoved?[containerRemovedClass]:[containerActiveClass],isLoading?[containerLoadingClass,loadingClassName]:null,isLoaded?[containerLoadedClass,loadedClassName]:null,isError?[containerErrorClass,errorClassName]:null),pictureClasses=classnames_default()(pictureClass,"".concat(pictureClass,"__js")),noScriptPictureClasses=classnames_default()(pictureClass,"".concat(pictureClass,"__no-js"));return{containerClass:getScopedClasses(containerClasses,styles),pictureClass:getScopedClasses(pictureClasses,styles),noScriptPictureClass:getScopedClasses(noScriptPictureClasses,styles)}}const getSourceForImageCollection=param=>{let{sourceKey,images,viewportMediaQuery}=param;const srcset=images.reduce(((acc,param,idx)=>{let{src,density=1}=param,srcsetVal="".concat(src);return src.length>0&&density>1&&(srcsetVal+=" ".concat(String(density),"x")),idx>0&&(acc+=", "),acc+=srcsetVal}),""),lastImage=images[images.length-1];let width,height;return void 0!==lastImage&&(width=lastImage.width/lastImage.density,height=lastImage.height/lastImage.density),{sourceKey,srcset,width,height,media:viewportMediaQuery.length>0?viewportMediaQuery:void 0}};var sortedIndexBy=__webpack_require__("./node_modules/lodash-es/sortedIndexBy.js");const addSortedViewportToArr=(viewport,arr,viewportsOrder)=>{arr.splice((0,sortedIndexBy.A)(arr,viewport,(vpToSort=>((viewport,viewportsOrder)=>{const val=viewportsOrder.indexOf(viewport.name);if(-1===val)throw new RangeError('Viewport "'.concat(viewport.name,'" is an invalid viewport name.'));return val})(vpToSort,viewportsOrder))),0,viewport)},addSortedImageToArr=(image,arr)=>{arr.splice((0,sortedIndexBy.A)(arr,image,"density"),0,image)},getSourcesForViewports=param=>{let{viewports,viewportsOrder,rangeViewports,images}=param;const imagesViewportsData=((images,viewports,viewportsOrder)=>{const result={viewports:[],images:{}};for(const image of images){const{viewport:viewportName}=image;Object.prototype.hasOwnProperty.call(viewports,viewportName)&&(Object.prototype.hasOwnProperty.call(result.images,viewportName)||(addSortedViewportToArr(viewports[viewportName],result.viewports,viewportsOrder),result.images[viewportName]=[]),addSortedImageToArr(image,result.images[viewportName]))}return result})(images,viewports,viewportsOrder);return((data,rangeViewports)=>{const result={pictureSources:[],pictureSourcesMetadata:[],reverseOrderUsedViewports:[]},viewportsLength=data.viewports.length;for(let i=0;i<viewportsLength;i++){const{name:viewportName}=data.viewports[i];if(!Object.prototype.hasOwnProperty.call(data.images,viewportName))continue;let viewportMediaQuery="";if(i!==viewportsLength-1){const rangeKey="range:".concat(viewportName," down"),rangeViewport=rangeViewports[rangeKey];if(void 0===rangeViewport)throw new TypeError('Cannot find range viewport "'.concat(rangeKey,'".'));viewportMediaQuery=rangeViewport.settings.query}const images=data.images[viewportName],sourceProps=getSourceForImageCollection({sourceKey:viewportName,images,viewportMediaQuery});result.pictureSources.push(sourceProps),result.pictureSourcesMetadata.push({viewport:viewportName}),result.reverseOrderUsedViewports.unshift(viewportName)}return result})(imagesViewportsData,rangeViewports)},getStyleVarName=(viewport,prop,varPrefix)=>"--".concat(null!=varPrefix?varPrefix:"vp","-").concat(prop,"-").concat(viewport),getDataAttrName=(viewport,prop,varPrefix)=>"data-".concat(null!=varPrefix?varPrefix:"vp","-").concat(prop,"-").concat(viewport),getViewportStyleProps_applyValueToResult=param=>{let{result,viewport,value,propMap,varPrefix}=param;for(const prop in value)if(Object.prototype.hasOwnProperty.call(value,prop)){let propKey=prop;void 0!==propMap&&Object.prototype.hasOwnProperty.call(propMap,prop)&&(propKey=propMap[prop]),result.style[getStyleVarName(viewport,propKey,varPrefix)]=value[prop],"default"!==viewport&&(result.dataAttrs[getDataAttrName(viewport,propKey,varPrefix)]="")}},getViewportStyleProps=param=>{let{value,reverseOrderViewports,propMap,varPrefix}=param;const result={dataAttrs:{},style:{}};if(!(value=>{for(const key in value)if(Object.prototype.hasOwnProperty.call(value,key)&&"object"==typeof value[key])return!0;return!1})(value)){return getViewportStyleProps_applyValueToResult({result,viewport:"default",value,propMap,varPrefix}),result}let defaultViewportProps=null,currentViewportProps=null;for(const viewport of reverseOrderViewports){if(Object.prototype.hasOwnProperty.call(value,viewport)){const viewportProps=value[viewport];currentViewportProps=viewportProps,null===defaultViewportProps&&(defaultViewportProps=viewportProps)}null!==currentViewportProps&&getViewportStyleProps_applyValueToResult({result,viewport,value:currentViewportProps,propMap,varPrefix})}return null!==defaultViewportProps&&getViewportStyleProps_applyValueToResult({result,viewport:"default",value:defaultViewportProps,propMap,varPrefix}),result},getViewportCSSVarProps=param=>{let{name,reverseOrderViewports,value,propMap}=param;if(void 0===value)return{};const objectValue={};if("string"==typeof value)objectValue[name]=value;else for(const viewport in value)Object.prototype.hasOwnProperty.call(value,viewport)&&(objectValue[viewport]={[name]:value[viewport]});const{dataAttrs,style}=getViewportStyleProps({value:objectValue,reverseOrderViewports,propMap,varPrefix:"rp"});return{...dataAttrs,style}},PictureComponent=(0,react.forwardRef)(((param,ref)=>{let{alt="",width,height,src,className,imgClassName,sources=[],children,onLoadStart,onLoad,onError,loading,objectPosition,...rest}=param;var _imgRef_current;const pictureRef=(0,react.useRef)(null),imgRef=(0,react.useRef)(null);(0,react.useImperativeHandle)(ref,(()=>({get picture(){return pictureRef.current},get img(){return imgRef.current}})));const inlineStyles={objectPosition};return(0,jsx_runtime.jsxs)("picture",{className,ref:pictureRef,...rest,children:[sources.map((param=>{let{sourceKey,srcset,width:srcWidth,height:srcHeight,media}=param;return(0,jsx_runtime.jsx)("source",{srcSet:srcset,width:srcWidth,height:srcHeight,media},sourceKey)})),(0,jsx_runtime.jsx)("img",{ref:imgRef,className:imgClassName,alt,width,height,src:null===(_imgRef_current=imgRef.current)||void 0===_imgRef_current?void 0:_imgRef_current.currentSrc,onLoadStart,onLoad,onError,loading,style:inlineStyles}),children]})}));PictureComponent.displayName="Picture";const Picture=PictureComponent;PictureComponent.__docgenInfo={description:"",methods:[{name:"picture",docblock:null,modifiers:["get"],params:[],returns:null},{name:"img",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Picture",props:{alt:{defaultValue:{value:'""',computed:!1},required:!1},sources:{defaultValue:{value:"[]",computed:!1},required:!1}}};var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ResponsivePicture_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[4]!./src/components/ResponsivePicture/ResponsivePicture.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ResponsivePicture_module.A,options);const ResponsivePicture_ResponsivePicture_module=ResponsivePicture_module.A&&ResponsivePicture_module.A.locals?ResponsivePicture_module.A.locals:void 0,ResponsivePictureComponent=(0,react.forwardRef)(((param,ref)=>{let{as:Tag="figure",alt,className,renderedClassName,loadingPreventedClassName,loadingClassName,loadedClassName,errorClassName,hydratedClassName,notHydratedClassName,imgClassName,pictureClassName,images=[],layout="sized",objectFit,objectPosition,style,onLoadStart:onLoadStartArg,onLoad:onLoadArg,onError:onErrorArg,preventLoading=!1,...rest}=param;const pictureRef=(0,react.useRef)(null),shouldRenderImages=!preventLoading,{isLoading,isLoaded,isError,onLoadStart,onLoad,onError}=(param=>{let{shouldRenderImages,pictureRef,onLoadStart:onLoadStartArg,onLoad:onLoadArg,onError:onErrorArg}=param;const isFirstRender=(0,react.useRef)(!0),onLoadingCallbackRef=(0,react.useRef)(null),onLoadCallbackRef=(0,react.useRef)(null),onErrorCallbackRef=(0,react.useRef)(null),[isLoading,setIsLoading]=(0,react.useState)(!1),[isLoaded,setIsLoaded]=(0,react.useState)(!1),[isError,setIsError]=(0,react.useState)(!1);onLoadingCallbackRef.current=onLoadStartArg,onLoadCallbackRef.current=onLoadArg,onErrorCallbackRef.current=onErrorArg;const onLoadReset=(0,react.useCallback)((()=>{setIsLoading(!1),setIsLoaded(!1),setIsError(!1)}),[setIsLoading,setIsLoaded,setIsError]),onLoadStart=(0,react.useCallback)((()=>{setIsLoading(!0),setIsLoaded(!1),setIsError(!1)}),[setIsLoading,setIsLoaded,setIsError]),onLoad=(0,react.useCallback)((()=>{setIsLoading(!1),setIsLoaded(!0),setIsError(!1)}),[setIsLoading,setIsLoaded,setIsError]),onError=(0,react.useCallback)((()=>{setIsLoading(!1),setIsLoaded(!1),setIsError(!0)}),[setIsLoading,setIsLoaded,setIsError]),handleCompleteImg=(0,react.useCallback)((()=>{var _pictureRef_current,_pictureRef_current1,_pictureRef_current_img,_pictureRef_current2;null!==(null===(_pictureRef_current=pictureRef.current)||void 0===_pictureRef_current?void 0:_pictureRef_current.img)&&""!==(null===(_pictureRef_current1=pictureRef.current)||void 0===_pictureRef_current1?void 0:_pictureRef_current1.img.currentSrc)&&!0===(null===(_pictureRef_current2=pictureRef.current)||void 0===_pictureRef_current2||null===(_pictureRef_current_img=_pictureRef_current2.img)||void 0===_pictureRef_current_img?void 0:_pictureRef_current_img.complete)&&onLoad()}),[pictureRef,onLoad]);return(0,react.useEffect)((()=>{shouldRenderImages||onLoadReset()}),[shouldRenderImages,onLoadReset]),(0,react.useEffect)((()=>{shouldRenderImages&&isFirstRender.current&&(isFirstRender.current=!1,handleCompleteImg())}),[shouldRenderImages,handleCompleteImg]),(0,react.useEffect)((()=>{isLoading&&"function"==typeof onLoadingCallbackRef.current&&onLoadingCallbackRef.current()}),[isLoading]),(0,react.useEffect)((()=>{isLoaded&&"function"==typeof onLoadCallbackRef.current&&onLoadCallbackRef.current()}),[isLoaded]),(0,react.useEffect)((()=>{isError&&"function"==typeof onErrorCallbackRef.current&&onErrorCallbackRef.current()}),[isError]),{isLoading,isLoaded,isError,onLoadStart,onLoad,onError}})({shouldRenderImages,pictureRef,onLoadStart:onLoadStartArg,onLoad:onLoadArg,onError:onErrorArg}),isHydrated=(0,react.useContext)(HydrationContext),{viewportsOrder,viewports,rangeViewports}=(0,react.useContext)(ViewportContext.kw),{pictureSources,pictureSourcesMetadata,reverseOrderUsedViewports}=getSourcesForViewports({viewports,viewportsOrder,rangeViewports,images:shouldRenderImages?images:images.map((img=>({...img,src:""})))}),pictureBaseClassName="".concat("responsive-picture","__picture"),{containerClass,pictureClass,noScriptPictureClass}=getClassNames({isHydrated,isRendered:shouldRenderImages,isLoading,isLoaded,isError,renderedClassName,loadingPreventedClassName,loadingClassName,loadedClassName,errorClassName,hydratedClassName,notHydratedClassName,styles:ResponsivePicture_ResponsivePicture_module,containerClass:"responsive-picture",pictureClass:pictureBaseClassName,layout,reverseOrderViewports:reverseOrderUsedViewports}),sizes=(param=>{let{sources,sourcesMetadata}=param;const sizes={};for(let i=0;i<sources.length;i++){const{width,height}=sources[i],{viewport}=sourcesMetadata[i];void 0!==width&&void 0!==height&&(sizes[viewport]={cssWidth:"".concat(width,"px"),cssHeight:"".concat(height,"px")})}return sizes})({sources:pictureSources,sourcesMetadata:pictureSourcesMetadata}),viewportVarProps=(param=>{let{sizes,objectPosition,objectFit,reverseOrderViewports}=param;const sizesProps=getViewportStyleProps({value:sizes,reverseOrderViewports,propMap:{cssWidth:"w",cssHeight:"h"}}),objectPositionProps=getViewportCSSVarProps({name:"objectPosition",value:objectPosition,reverseOrderViewports,propMap:{objectPosition:"op"}}),objectFitProps=getViewportCSSVarProps({name:"objectFit",value:objectFit,reverseOrderViewports,propMap:{objectFit:"of"}});return{...sizesProps.dataAttrs,...objectPositionProps,...objectFitProps,style:{...sizesProps.style,...objectPositionProps.style,...objectFitProps.style}}})({sizes,objectFit,objectPosition,reverseOrderViewports:reverseOrderUsedViewports}),containerStyle=void 0!==style?{...style,...viewportVarProps.style}:viewportVarProps.style;return(0,jsx_runtime.jsxs)(Tag,{...rest,...viewportVarProps,style:containerStyle,as:Tag,className:classnames_default()(containerClass,className),children:[(0,jsx_runtime.jsx)(Picture,{alt,className:classnames_default()(pictureClass,pictureClassName),ref:pictureRef,sources:pictureSources,imgClassName,onLoadStart,onLoad,onError}),isHydrated||shouldRenderImages?null:(0,jsx_runtime.jsx)("noscript",{children:(0,jsx_runtime.jsx)(Picture,{alt,className:noScriptPictureClass,sources:getSourcesForViewports({viewports,viewportsOrder,rangeViewports,images}).pictureSources,imgClassName:"noscript"})})]})}));ResponsivePictureComponent.displayName="ResponsivePicture";const ResponsivePicture=ResponsivePictureComponent;ResponsivePictureComponent.__docgenInfo={description:"",methods:[],displayName:"ResponsivePicture",props:{as:{defaultValue:{value:'"figure"',computed:!1},required:!1},images:{defaultValue:{value:"[]",computed:!1},required:!1},layout:{defaultValue:{value:'"sized"',computed:!1},required:!1},preventLoading:{defaultValue:{value:"false",computed:!1},required:!1}}}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[4]!./src/components/ResponsivePicture/ResponsivePicture.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);