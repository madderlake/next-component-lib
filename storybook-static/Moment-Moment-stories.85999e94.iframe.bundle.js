"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[108],{"./src/components/Moment/Moment.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,WithLink:()=>WithLink,__namedExportsOrder:()=>__namedExportsOrder,asPageHeader:()=>asPageHeader,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js"),_contexts_BaseExperience_BaseExperienceProvider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/contexts/BaseExperience/BaseExperienceProvider.tsx"),_hooks_anim_useTimeGroupContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/anim/useTimeGroupContext.ts"),_Moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Moment/Moment.tsx"),_MomentEnhanced__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Moment/MomentEnhanced.tsx");function AnimatedContent({children,...rest}){const elRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),Anim=(0,_hooks_anim_useTimeGroupContext__WEBPACK_IMPORTED_MODULE_3__.J)();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{if(null===Anim)return;const{timeGroup,childStartTime,startDelay}=Anim,start=childStartTime+startDelay,opacityKf={start,end:start+_MomentEnhanced__WEBPACK_IMPORTED_MODULE_5__.Z$,opacity:[null,1]},moveKf={start,end:start+_MomentEnhanced__WEBPACK_IMPORTED_MODULE_5__.X7,y:[null,0]};timeGroup.addKeyframe(elRef.current,opacityKf),timeGroup.addKeyframe(elRef.current,moveKf)}),[elRef,Anim]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:elRef,...rest,style:{backgroundColor:"#ddd",minHeight:"50vh",display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre",flexShrink:0,opacity:0,transform:"translateY(50px)",...rest.style},children})}const __WEBPACK_DEFAULT_EXPORT__={title:"components/Moment",component:_Moment__WEBPACK_IMPORTED_MODULE_4__.d,argTypes:{}},Template=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_contexts_BaseExperience_BaseExperienceProvider__WEBPACK_IMPORTED_MODULE_2__.z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Moment__WEBPACK_IMPORTED_MODULE_4__.d,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AnimatedContent,{children:"Section content goes here"})})}),Basic=Template.bind({});Basic.args={name:"moment-basic",title:"Explore the lineup",enhanced:!0},Basic.argTypes={description:{table:{disable:!0}},sectionHeaderLink:{table:{disable:!0}}};const WithLink=Template.bind({});WithLink.args={name:"moment-link",sectionHeaderLink:{children:"All accessories",href:"#",analytics:{"data-analytics-title":"moment-link"}},title:"iPad essentials",headerAs:"SectionHeader",enhanced:!0},WithLink.argTypes={description:{table:{disable:!0}}};const asPageHeader=Template.bind({});asPageHeader.args={title:"iPad",name:"moment-custom-heading",description:"Your next computer\nis not a computer",headerAs:"PageHeader",enhanced:!0},asPageHeader.argTypes={sectionHeaderLink:{table:{disable:!0}}};const __namedExportsOrder=["Basic","WithLink","asPageHeader"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"(props: MomentProps) =>\n// <SassKitViewportsProvider sassData={sassData}>\n<BaseExperienceProvider>\n    <Moment {...props}>\n      <AnimatedContent>Section content goes here</AnimatedContent>\n    </Moment>\n  </BaseExperienceProvider>\n// </SassKitViewportsProvider>",...Basic.parameters?.docs?.source}}},WithLink.parameters={...WithLink.parameters,docs:{...WithLink.parameters?.docs,source:{originalSource:"(props: MomentProps) =>\n// <SassKitViewportsProvider sassData={sassData}>\n<BaseExperienceProvider>\n    <Moment {...props}>\n      <AnimatedContent>Section content goes here</AnimatedContent>\n    </Moment>\n  </BaseExperienceProvider>\n// </SassKitViewportsProvider>",...WithLink.parameters?.docs?.source}}},asPageHeader.parameters={...asPageHeader.parameters,docs:{...asPageHeader.parameters?.docs,source:{originalSource:"(props: MomentProps) =>\n// <SassKitViewportsProvider sassData={sassData}>\n<BaseExperienceProvider>\n    <Moment {...props}>\n      <AnimatedContent>Section content goes here</AnimatedContent>\n    </Moment>\n  </BaseExperienceProvider>\n// </SassKitViewportsProvider>",...asPageHeader.parameters?.docs?.source}}}},"./src/contexts/BaseExperience/BaseExperienceContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>BaseExperienceContext});const BaseExperienceContext=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js").createContext(null)},"./src/contexts/BaseExperience/BaseExperienceProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>BaseExperienceProvider});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js"),ua_parser=__webpack_require__("./node_modules/.pnpm/ua-parser-js@1.0.38/node_modules/ua-parser-js/src/ua-parser.js");var useViewport=__webpack_require__("./src/hooks/viewport/useViewport.tsx");const useSmallDesktop=()=>{const[query,setQuery]=(0,react.useState)(null),isTouchAvailable=(()=>{const[query,setQuery]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const touchQuery=window.matchMedia("(pointer: coarse)");setQuery(null==touchQuery?void 0:touchQuery.matches)}),[]),query})(),viewport=(0,useViewport.k)(["small","medium"]);return(0,react.useEffect)((()=>{!1===isTouchAvailable&&"small"===(null==viewport?void 0:viewport.name)?setQuery(!0):setQuery(!1)}),[viewport,isTouchAvailable]),query};var useLayoutEffectIsomorphic=__webpack_require__("./src/hooks/useLayoutEffectIsomorphic/useLayoutEffectIsomorphic.tsx"),BaseExperienceContext=__webpack_require__("./src/contexts/BaseExperience/BaseExperienceContext.tsx");const BaseExperienceProvider=({children,triggers=[]})=>{const[shouldEnhance,setShouldEnhance]=(0,react.useState)(null),isDesktopSmall=useSmallDesktop(),triggersBaseExperience=[(()=>{const[query,setQuery]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const motionQuery=window.matchMedia("(prefers-reduced-motion: reduce)");setQuery(null==motionQuery?void 0:motionQuery.matches)}),[]),query})(),(()=>{const[query,setQuery]=(0,react.useState)(null);return(0,react.useEffect)((()=>{"Android Browser"===(new ua_parser.UAParser).getResult().browser.name?setQuery(!0):setQuery(!1)}),[]),query})(),isDesktopSmall,...triggers];return(0,useLayoutEffectIsomorphic.A)((()=>{triggersBaseExperience.some((test=>!0===test))?setShouldEnhance(!1):setShouldEnhance(!0)}),[isDesktopSmall,...triggers]),(0,jsx_runtime.jsx)(BaseExperienceContext.L.Provider,{value:shouldEnhance,children})};BaseExperienceProvider.__docgenInfo={description:"",methods:[],displayName:"BaseExperienceProvider",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},triggers:{required:!1,tsType:{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"},description:"",defaultValue:{value:"[]",computed:!1}}}}},"./src/contexts/Viewport/ViewportContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ie:()=>getViewportEventsDefaultValue,P5:()=>getViewportGettersDefaultValue,kw:()=>ViewportContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js");const getViewportEventsDefaultValue=()=>({initialized:!1,onViewport:()=>{},offViewport:()=>{},onScreenProp:()=>{},offScreenProp:()=>{}}),getViewportGettersDefaultValue=()=>({getCurrentViewport:()=>null,getCurrentScreenPropValue:()=>null,getOrderedViewports:()=>[],getEmitterIsDestroyed:()=>!0}),ViewportContextDefaultValue={viewportsOrder:[],viewports:{},rangeViewports:{},screenProps:{},events:getViewportEventsDefaultValue(),getters:getViewportGettersDefaultValue()},ViewportContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(ViewportContextDefaultValue)},"./src/hooks/useLayoutEffectIsomorphic/useLayoutEffectIsomorphic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js").useLayoutEffect},"./src/hooks/viewport/useViewport.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>useViewport});var isEqual=__webpack_require__("./node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isEqual.js"),react=__webpack_require__("./node_modules/.pnpm/next@14.1.4_@babel+core@7.25.2_react-dom@18.2.0_react@18.2.0__react@18.2.0_sass@1.78.0/node_modules/next/dist/compiled/react/index.js"),ViewportContext=__webpack_require__("./src/contexts/Viewport/ViewportContext.tsx"),useLayoutEffectIsomorphic=__webpack_require__("./src/hooks/useLayoutEffectIsomorphic/useLayoutEffectIsomorphic.tsx");const getNearestViewport=({currentViewportName,targetViewportName,orderedViewportNames,allOrderedViewportNames,viewports})=>{if(void 0!==targetViewportName&&currentViewportName===targetViewportName)return viewports[targetViewportName];if(-1!==orderedViewportNames.indexOf(currentViewportName))return viewports[currentViewportName];const indexInFullList=allOrderedViewportNames.indexOf(currentViewportName);if(-1===indexInFullList)return null;for(let i=indexInFullList;i>-1;i--)if(orderedViewportNames.includes(allOrderedViewportNames[i]))return viewports[allOrderedViewportNames[i]];return viewports[orderedViewportNames[0]]},useViewportHandlers=({setViewport,onViewport,offViewport,getCurrentViewport,getEmitterIsDestroyed,orderedViewportsToWatch,allOrderedViewportNames,allViewports})=>{const viewportName=(0,react.useRef)(null);(0,useLayoutEffectIsomorphic.A)((()=>{if(!getEmitterIsDestroyed()){const initialViewport=getCurrentViewport(allOrderedViewportNames),viewportToSet=null===initialViewport?null:getNearestViewport({currentViewportName:initialViewport.name,orderedViewportNames:orderedViewportsToWatch,allOrderedViewportNames,viewports:allViewports});var _viewportToSet_name;setViewport(viewportToSet),viewportName.current=null!==(_viewportToSet_name=null==viewportToSet?void 0:viewportToSet.name)&&void 0!==_viewportToSet_name?_viewportToSet_name:null}const handlers=(({callback,viewportsToWatch,allViewportNames,viewports})=>{const handlers=[];for(const viewportName of allViewportNames){const targetViewportName=viewportsToWatch.includes(viewportName)?viewportName:void 0,handler=newViewport=>{const nearestViewport=getNearestViewport({currentViewportName:newViewport.name,targetViewportName,orderedViewportNames:viewportsToWatch,allOrderedViewportNames:allViewportNames,viewports});callback(nearestViewport)};handlers.push([viewportName,handler])}return handlers})({callback:nearestViewport=>{var _nearestViewport_name;null!==nearestViewport&&viewportName.current===nearestViewport.name||(setViewport(nearestViewport),viewportName.current=null!==(_nearestViewport_name=null==nearestViewport?void 0:nearestViewport.name)&&void 0!==_nearestViewport_name?_nearestViewport_name:null)},viewportsToWatch:orderedViewportsToWatch,allViewportNames:allOrderedViewportNames,viewports:allViewports});return handlers.forEach((([_viewportName,handler])=>onViewport(_viewportName,handler))),()=>{handlers.forEach((([_viewportName,handler])=>offViewport(_viewportName,handler)))}}),[onViewport,offViewport,getCurrentViewport,getEmitterIsDestroyed,orderedViewportsToWatch,allOrderedViewportNames,allViewports])},useViewport=viewportProps=>{const[initialProps,setInitialProps]=(0,react.useState)(viewportProps),[viewport,setViewport]=(0,react.useState)(null),{viewports,events,getters}=(0,react.useContext)(ViewportContext.kw),{onViewport,offViewport}=events,{getCurrentViewport,getOrderedViewports,getEmitterIsDestroyed}=getters,allOrderedViewportNames=(0,react.useMemo)((()=>getOrderedViewports(Object.keys(viewports))),[viewports,getOrderedViewports]),orderedViewportsToWatch=(0,react.useMemo)((()=>{let viewportsToWatch=[];return viewportsToWatch=void 0!==initialProps?"string"==typeof initialProps?initialProps.split(" "):initialProps:Object.keys(viewports),getOrderedViewports(viewportsToWatch)}),[initialProps,getOrderedViewports,viewports]);return(0,react.useEffect)((()=>{(0,isEqual.A)(viewportProps,initialProps)||setInitialProps(viewportProps)}),[initialProps,viewportProps]),useViewportHandlers({setViewport,onViewport,offViewport,getCurrentViewport,getEmitterIsDestroyed,orderedViewportsToWatch,allViewports:viewports,allOrderedViewportNames}),viewport}}}]);